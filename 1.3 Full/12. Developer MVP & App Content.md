---
tags: [FPA, Developer, MVP, App, Build]
---
<!--
INSTRUCTION FOR GPT REWRITE ¬∑ FPA Mk1Mod3 ¬∑ 12. Developer MVP & App Content.md

This note is part of a coordinated 21-file rewrite. The system has accumulated inconsistencies in terminology, outdated references, and fragmented logic. Your task is to:

‚úÖ Standardize terminology across the Mk1Mod3 system.
‚úÖ Flag and fix misalignments between sections and related files.
‚úÖ Deeply interlink this note with all other Mk1Mod3 documents using [[Note Name]] format.
‚úÖ Maintain original meaning ‚Äî but clarify, consolidate, and format for coherence.
‚úÖ DO NOT create new ideas or models ‚Äî restructure only based on what exists.

Known systemic issues to watch for:
- Terms, role names, or procedures that differ between files and need unification.
- Notes that refer to concepts covered elsewhere without linking or quoting.
- Updates to frameworks or protocols that aren't reflected consistently.
- Lack of clear flow between orientation ‚Üí training ‚Üí execution ‚Üí governance ‚Üí feedback.

Your rewrite goal:
Define features, flows, and GPT touchpoints. Interlink all modules with corresponding logic and readiness states.

Audience:
developers, content architects
--># üì≤ Developer Blueprint & MVP Build Doctrine ‚Äì Mk1Mod3

_A constitution-grade reference for every engineer, product owner, and advisor touching FPA code._

---

## 1 ‚Äî Purpose & Non-Negotiables

|Why this document exists|How we judge every pull-request|
|---|---|
|Unify years of ideas (Tech Stack + Build Plan, ‚ÄúDev MVP & App Content‚Äù) into one canonical map.|Does the change: **(a)** protect trust, **(b)** harden offline-first resilience, **(c)** keep the stack small-but-scalable? If any ‚Äúno‚Äù ‚Üí back to design.|

**Foundational principles**

1. **Trust-first engineering.** Features ship only when the audit feed, rollback hooks, and human-override paths are in place ‚Äãüîê_FPA_Trust_Doctrine_M‚Ä¶.
    
2. **Offline is the default, not the backup.** Every critical workflow outputs a printable or radio-read alternative ‚ÄãFPA‚Äôs_Offline-First_Res‚Ä¶.
    
3. **AI is an assistant, never the admin.** GPT routes are wrapped in human review gates described in ‚ÄúCore AI Demands‚Äù ‚ÄãCORE_AI_DEMANDS_YOU_VE_‚Ä¶.
    
4. **Module over monolith.** Each domain (User Inflow, Gear, Trust, Drills) lives behind its own API and schema slice‚Äîeasier to version, fork, or freeze during an incident.
    

---

## 2 ‚Äî Minimum-Viable Product (MVP) Scope

|Epic|Member Value|First-Ship Functions|
|---|---|---|
|**User Inflow**|Instant participation with guard-rails|Application form + AI triage (Green/Yellow/Red) and 5-day email/on-app onboarding cadence ‚Äã‚úÖ FPA USER INFLOW STRAT‚Ä¶|
|**Core Content Access**|Dictionary, Compass, SOPs always one click or one print away|Searchable React UI, PDF compiler, offline bundle export|
|**Trust & Rank Engine**|Transparent reputation; no mystery admin|Readiness-Cred ledger, rank-up checklist, Trust Firewall triggers (log + patch queue)|
|**Test My Plan v1**|AI feedback that‚Äôs blunt and printable|Chat route ‚Üí plan scorecard PDF (water, comms, evac, etc.) using GPT function calling|

_Out of MVP (Phase 2+):_ dynamic sponsorship marketplace, full Skill-Wheel analytics, peer-to-peer asset rentals.

---

## 3 ‚Äî Reference Stack (Mk1Mod3)

| Layer              | Tech                                            | Rationale                                                                  |
| ------------------ | ----------------------------------------------- | -------------------------------------------------------------------------- |
| **Frontend**       | Next.js + React 18  <br>TailwindCSS + shadcn/ui | Island-based rendering; quick theming for dark-mode grid-down screens      |
| **Mobile Wrapper** | Capacitor JS                                    | One codebase ‚Üí Android / iOS offline apps                                  |
| **API Tier**       | Node 20 + Express                               | Familiar, light, easy to host on Vercel functions                          |
| **Auth**           | Supabase (JWT) ‚Üí optional Auth0                 | Row-level security + instant social log-ins                                |
| **DB**             | PostgreSQL via Prisma                           | Relational consistency for trust ledgers, plus native JSONB for AI prompts |
| **Cache / Queue**  | Redis                                           | Rate-limit GPT calls; debounce email pushes                                |
| **AI Services**    | OpenAI Assistants API (function-calling)        | Single vendor until self-host LLM pilot (Phase 3)                          |
| **Storage**        | Supabase buckets ‚Üí S3 mirror                    | Version-tagged PDFs, radio codebooks, print assets                         |
| **CI/CD**          | GitHub Actions ‚Üí Vercel + Fly.io                | Green/Yellow/Red test matrix; preview deploys every PR                     |
| **Observability**  | Grafana + Loki logs                             | No-surprise outages; trust score drops if uptime < 99.5 %                  |

---

## 4 ‚Äî Data Model (high-level)

text

User
 ‚îú‚îÄ id (UUID)
 ‚îú‚îÄ rank (enum E1-O10)
 ‚îú‚îÄ trust_score (int)
 ‚îú‚îÄ offline_key (print-ready slug)
 ‚îî‚îÄ profile_state (JSONB)  ‚Üê AI writes gaps & strengths
Squad
 ‚îú‚îÄ id
 ‚îú‚îÄ region_id
 ‚îú‚îÄ radio_call (string)
 ‚îî‚îÄ readiness_score
ContentModule
 ‚îú‚îÄ slug (Dictionary, Compass, Gear)
 ‚îî‚îÄ version / checksum
AuditLog
 ‚îú‚îÄ actor_id
 ‚îú‚îÄ action
 ‚îú‚îÄ target
 ‚îî‚îÄ diff / metadata

**Schema rule of thumb:** anything a paper form might need in blackout lives in its own table with a `print_template_id`.

---

## 5 ‚Äî Build-Out Sequencing & ‚ÄúDone‚Äù definitions

|Sprint Block|Deliverable|Hard exit criteria|
|---|---|---|
|**0. Bootstrap**|Repo, CI, schema, Supabase instance|Green pipeline; staging URL auto-deploys|
|**1. Inflow Alpha**|Public apply page + AI triage|Green paths create user; Yellow appears in admin queue; Red auto-reject email|
|**2. Content Viewer**|Dictionary browse + PDF compile|Any term prints cleanly; offline toggle works|
|**3. Trust Ledger**|Rank page, Cred earn actions|Manual points award + audit entry round-trips|
|**4. Test My Plan v1**|Chat route, plan PDF export|AI feedback matches rule set; PDF under 1 MB, no external calls|
|**5. Blackout Drill**|Pull server plug for 2 hrs|Paper SOP lets local devs re-sync data with zero loss|

---

## 6 ‚Äî Offline-First Implementation Notes

- **Print Pipeline.** One Markdown ‚Üí Node PDF job ‚Üí queued nightly auto-pack to ‚ÄúOffline Activation Kit‚Äù storage ‚ÄãFPA‚Äôs_Offline-First_Res‚Ä¶.
    
- **HAM Sync Hook.** Weekly cron exports bulletin markdown to 7.200 MHz encoder (Phase 2 hardware).
    
- **Local Device Mode.** Capacitor build caches `ContentModule` bundle; IndexedDB mirrors user drill logs until reconnection.
    
- **Graceful API failure.** Express middleware flips to ‚Äústatic-only‚Äù if Postgres unreachable; UI exposes ‚ÄúOffline Banner.‚Äù
    

---

## 7 ‚Äî AI Integration Guard-Rails

|Risk|Mitigation|
|---|---|
|Model changes price-out|Budget cap per month; switchable to gpt-3.5 fallback|
|Hallucinated prep advice|Trust Firewall auto-flags; Yellow class human review before publish ‚ÄãCORE_AI_DEMANDS_YOU_VE_‚Ä¶|
|Prompt injection|All user input goes through escape + function-call whitelist|

AI outputs **never** overwrite human rank data; they suggest, squads decide.

---

## 8 ‚Äî Security & Compliance Checklist

- **Zero central god-admin.** Every privilege escalates via dual sign-off and logs to Audit table ‚Äãüîê_FPA_Trust_Doctrine_M‚Ä¶.
    
- **Role-based encryption.** Trust ledgers and location data encrypted at field level (AES-256).
    
- **Bug bounty day-one.** Public report form; patches prioritized over features.
    
- **GDPR / CCPA.** Data-export endpoint + right-to-forget job (scrubs personal fields, keeps anon stats).
    

---

## 9 ‚Äî Open Items for Member Review (Experimental)

|Proposal|Status|Comment|
|---|---|---|
|**Founding-Father Lifetime Tier**|üü° Draft|Pay = 1-yr dues up front; converts to credit once sponsorship fund live (needs finance circle vote).|
|**P2P Content Relay**|üü° R&D|Use WebRTC + local mesh when internet up, else HAM packet.|
|**Self-host LLM**|üî¥ Hold|Evaluate costs after ‚â• 50 k weekly actives.|

All experiments are tagged `üü°` in the repo and must be toggled off in production until ratified.

---

## 10 ‚Äî Linked Canonical Modules

- [[FPA User Inflow Strategy]] ‚Äì field validation & email flow
    
- [[Offline-First Resilience System]] ‚Äì dual-layer definition
    
- [[Trust Doctrine]] ‚Äì how audit hooks must behave
    
- [[Core AI Demands]] ‚Äì GPT function spec & risk map
    
- [[Operational Readiness SOPs]] ‚Äì print pipeline triggers
    

---

### Final Word

This blueprint is **living law** for the codebase. Break it, and you break member trust. Build with it, and every deploy tightens the alliance. When in doubt: print it, radio it, or vote it‚Äîbut never ship past it.